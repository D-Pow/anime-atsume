name: Server - Verify and Build
description: Installs, tests, and builds the back-end


# This is for a sample Python back-end but it could easily be modified for any back-end system

runs:
  using: composite
  steps:
    - name: Checkout repository branch
      uses: actions/checkout@v3

    - name: Download client cache
      id: server-download-client-artifacts
      uses: actions/download-artifact@v3
      with:
        name: client-build-output
        path: |
          # ./client/node_modules
          ./server/src/main/resources/public

    - name: Server Build
      id: server-build
      shell: bash
      run: |
        cd ./server
        ./gradlew clean build

    - name: Server build output cache
      uses: actions/upload-artifact@v3
      with:
        name: ci-server-build-output
        path: |
          ./server/build/libs
